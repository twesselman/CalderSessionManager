{"ts":1362258913960,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var express = require ('express');\r\nvar app = express();\r\n\r\napp.use(express.cookieParser());\r\napp.use(express.cookieSession({ secret: 'Calder Demo Secret', cookie: { maxAge: 60 * 60 * 1000 }}));\r\n \r\nvar ericomurl='http://10.81.108.10:8080/AccessNow/start.html';\r\n\r\napp.configure(function() {\r\n    app.use(express.bodyParser());\r\n    app.use(express.cookieParser());\r\n    app.use(express.session({secret: 'my super secret'}));\r\n    app.use(express.static(__dirname + '/website'));    \r\n    app.use(express.static(__dirname + '/kendo'));\r\n    app.use(express.static(__dirname + '/website/script'));\r\n    app.use(express.static(__dirname + '/website/content'));\r\n    });\r\n\r\n\r\napp.post('/set', function (req, res) {\r\n    console.log('set called');\r\n    req.session.username = req.body.name;\r\n    res.cookie('mycookie', req.body.name);\r\n    res.send('session.username set to ' + req.body.name);\r\n});\r\n\r\napp.get('/read', function(req, res) {\r\n   if(req.session.username)\r\n   {\r\n       var result = 'session.username: ' + req.session.username + '<br>';\r\n       result += 'cookie: ' + req.cookies.mycookie +'<br>';\r\n       \r\n       result += req.cookies;\r\n       res.send(result);\r\n   } \r\n   else\r\n   {\r\n       res.send('no data');\r\n   }  \r\n});\r\n\r\nvar myApps = {\"apps\": [\r\n        {\"name\": \"Outlook\", \"imagefile\": \"outlook.png\", \"exe\": \"/launch/outlook\"},        \r\n        {\"name\": \"Word\", \"imagefile\": \"word.png\", \"exe\": \"/launch/word\"},        \r\n        {\"name\": \"Excel\", \"imagefile\": \"excel.png\", \"exe\": \"/launch/excel\"},        \r\n        {\"name\": \"Powerpoint\", \"imagefile\": \"powerpoint.png\", \"exe\": \"/launch/msppt\"},        \r\n        {\"name\": \"Paint\", \"imagefile\": \"mspaint.png\", \"exe\": \"/launch/mspaint\"},        \r\n        {\"name\": \"Aptana\", \"imagefile\": \"aptana.png\", \"exe\": \"/launch/aptana\"},\r\n        {\"name\": \"Autocad\", \"imagefile\": \"autocad.png\", \"exe\": \"#\"},\r\n        {\"name\": \"SAP ERP\", \"imagefile\": \"erp.png\", \"exe\": \"#\"}\r\n    ]\r\n};\r\n\r\napp.get('/myapps', function(req, res) {\r\n    console.log('get myapps');\r\n    console.log(myApps);\r\n    res.send(JSON.stringify(myApps));\r\n});\r\n\r\napp.post('/login', function(req, res) {\r\n    console.log('login: '+req.body.username + ' password: ' + req.body.password);\r\n    \r\n    // do login stuff\r\n    req.session.login = req.body.username;\r\n    \r\n    res.redirect('/calder.html');\r\n});\r\n\r\napp.get('/launch/:app', function(req, res) {\r\n    console.log('launch called: App: '+req.params.app);\r\n    \r\n    // set cookies (works only if Ericom is on the same server\r\n\r\n    res.cookie('EAN_username', 'Tom');\r\n    res.cookie('EAN_password', 'Cisco123!');\r\n    res.cookie('EAN_autostart', 'true');\r\n    res.cookie('EAN_remoteapplicationmode', 'true');\r\n\r\n    var appPath;\r\n    switch (req.params.app) {\r\n    case 'aptana': \r\n        appPath = '\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Aptana Studio 3\\\\AptanaStudio3.exe\"';\r\n        break;\r\n    case 'desktop': \r\n        res.cookie('EAN_remoteapplicationmode', 'false');\r\n        console.log('Launching: desktop');\r\n        break;\r\n    default: \r\n        appPath = req.params.app;\r\n    \r\n    }\r\n\r\n    if (appPath) {\r\n        res.cookie('EAN_alternate_shell', appPath);\r\n        console.log('Launching: ' + appPath);\r\n    } \r\n    \r\n    var url = ericomurl;\r\n    if (appPath) {\r\n        url += '?autostart=true&remoteapplicationmode=true&username=Tom&password=Cisco123!&alternate_shell=';\r\n        url += appPath;        \r\n    }    \r\n    else {\r\n        url += '?autostart=true&username=Tom&password=Cisco123!';\r\n    }\r\n    \r\n    console.log(url);\r\n    res.redirect(url);\r\n\r\n//    res.redirect(ericomurl);\r\n});\r\n\r\n\r\n// listen\r\nvar port = process.env.PORT || 80;\r\napp.listen(port, function () {\r\n    console.log('Calder Demo - listening on '+port);\r\n});\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":3740}]],"length":3740}
{"contributors":[],"silentsave":true,"ts":1362274717009,"patch":[[{"diffs":[[0,"t.html';\r\n\r\n"],[1,"var uriWorkspace='http://cdemo.twesselman.c9.io';\r\n//var uriWorkspace='http://10.81.108.13:3000';\r\n\r\nvar uriManager='http://caldersessionmanager.twesselman.c9.io';\r\n//var uriManager='http://10.81.108.14:3000';\r\n\r\n"],[0,"app.configur"]],"start1":253,"start2":253,"length1":24,"length2":237},{"diffs":[[0,"  \r\n"],[-1,"    app.use(express.static(__dirname + '/kendo'));\r\n    app.use(express.static(__dirname + '/website/script'));\r\n    app.use(express.static(__dirname + '/website/content'));\r\n"],[0,"    "]],"start1":694,"start2":694,"length1":183,"length2":8},{"diffs":[[0,"t('/"],[-1,"calder.html'"],[1,"gotoworkspace');\r\n});\r\n\r\napp.get('/gotoworkspace', function(req, res) {\r\n    console.log('gotoworkspace: username: '+req.body.username + ', password: ' + req.body.password);\r\n    \r\n    var uniqueID = 'userid';\r\n    var uriRedirect = uriWorkspace+'/workspace?id='+uniqueID+'&csmanager='+uriManager;\r\n    res.redirect(uriRedirect"],[0,");\r\n"]],"start1":2342,"start2":2342,"length1":20,"length2":335},{"diffs":[[0,"PORT || "],[-1,"8"],[1,"300"],[0,"0;\r\napp."]],"start1":3987,"start2":3987,"length1":17,"length2":19},{"diffs":[[0,"'Calder "],[-1,"Demo"],[1,"Session Manager"],[0," - liste"]],"start1":4050,"start2":4050,"length1":20,"length2":31}]],"length":4106,"saved":false}
{"ts":1362274719137,"patch":[[{"diffs":[[0,"er='+uri"],[1,"CS"],[0,"Manager;"]],"start1":2627,"start2":2627,"length1":16,"length2":18}]],"length":4108,"saved":false}
{"ts":1362274726367,"patch":[[{"diffs":[[0,";\r\n//var uri"],[1,"CX"],[0,"Manager='htt"]],"start1":427,"start2":427,"length1":24,"length2":26}]],"length":4110,"saved":false}
{"ts":1362274727329,"patch":[[{"diffs":[[0,"uriC"],[-1,"X"],[1,"S"],[0,"Mana"]],"start1":436,"start2":436,"length1":9,"length2":9}]],"length":4110,"saved":false}
{"ts":1362274731067,"patch":[[{"diffs":[[0,"\nvar uri"],[1,"CS"],[0,"Manager="]],"start1":365,"start2":365,"length1":16,"length2":18}]],"length":4112,"saved":false}
{"ts":1362274833974,"patch":[[{"diffs":[[0,"rkspace?"],[1,"csuser"],[0,"id='+uni"]],"start1":2600,"start2":2600,"length1":16,"length2":22}]],"length":4118,"saved":false}
